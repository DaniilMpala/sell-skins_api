# API Документация

- *apikey*: ****
- *domain*: cobaltskins.tech

в Header: {authorization: Bearer *apikey*} и  {content-type: application/json}

## Описание работы

При данной интеграции на вашем сайте должна быть кнопка, "Депозит" (любая) при нажатие на которую ваш сайт через бекенд отправляет запрос к НАМ с трейд ссылкой или стим айди пользователя и мы возвращаем вам ссылку на депозит, на которую вы перекидываете Юзера, после депозита мы отпраляем вам коллбек об успешной оплате и о том что мы приняли скины с нашей стороны

<img width="3088" height="1686" alt="image" src="https://github.com/user-attachments/assets/750fed07-686c-4d2d-a8be-6fd10e3c07ba" />
<img width="3065" height="1687" alt="image" src="https://github.com/user-attachments/assets/3cd17be7-55c2-408d-b069-52c659316ec2" />



## Основные эндпоинты

### 1. Создание транзакции

**Эндпоинт:** `/api/transaction/pay`

**Метод:** POST

**Тип Body запроса:**

Мы в каллбек отправим meta данные, те же, что вы нам пришлите. Например можете прислать объект с вашим внутренним id, мы его вернем в каллбеке в том же ввиде.
```ts
class CreateTransactionPayDto {
  meta?: any
  steamID?: string
  tradeurl?: string;
};
```

**Пример Body запроса:**

Стим айди или трейд ссылку необходимо передать, чтобы мы понимали, что человек депозитит именно с этого аккаунта а не с левого.  
```json
{
  "meta": {"externalId": 123},
  "tradeurl": "https://steamcommunity.com/tradeoffer/new/?partner=****&token=*****",
  "steamID": "7374637372",
}
```

**Тип ответа:**
```ts
class CreateTransactionPayReturnDto {
  urlRedirect: string;
};
```

**Ответ:**
```json
{
  "urlRedirect": "http://dev.cobaltskins.tech/pay?token=eyJhbGci..."
}
```

### 2. Callback - webhook

Пример ответа в главном README https://github.com/DaniilMpala/sell-skins_api/blob/main/README.md
